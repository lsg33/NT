<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRdly6HFCGxuEraL16lYcKBqR1S1yRjqer6Gg&s" type="image/png">
    <title>NOVA TAG</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        body.light-mode {
            background-color: #ffffff;
            color: #000000;
        }

        body.dark-mode {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        body.dark-mode .mainS {
            background-color: #333; /* Gray background for dark mode */
            color: #fff; /* White text for dark mode */
        }

        header {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem;
            position: relative;
        }

        .search-bar {
            position: absolute;
            right: 1rem;
            top: 1rem;
            display: flex;
            align-items: center;
        }

        .search-bar input {
            padding: 0.5rem;
            border: none;
            border-radius: 4px;
            margin-right: 0.5rem;
        }

        .search-bar button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background-color: #444;
            color: white;
            cursor: pointer;
        }

        nav {
            margin-top: 1rem;
        }

        .tabs {
            list-style-type: none;
            padding: 0;
            display: flex;
            justify-content: center;
            background-color: #444;
        }

        .tabs li {
            position: relative;
            margin: 0;
        }

        .tabs a {
            display: block;
            padding: 1rem;
            color: white;
            text-decoration: none;
        }

        .tabs a:hover {
            background-color: #555;
        }

        .dropdown {
            display: none;
            position: absolute;
            background-color: #444;
            min-width: 160px;
            z-index: 1;
        }

        .dropdown a {
            display: block;
            padding: 1rem;
            color: white;
            text-decoration: none;
        }

        .dropdown a:hover {
            background-color: #555;
        }

        .tabs li:hover .dropdown {
            display: block;
        }

        .content-section {
            padding: 2rem;
            flex-grow: 1;
        }

        .product {
            border: 1px solid #ddd;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .product img {
            max-width: 100%;
            height: auto;
        }

        .product h3 {
            margin: 0.5rem 0;
        }

        .product button {
            background-color: #333;
            color: white;
            border-radius: 4px;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
        }

        .friend button {
            background-color: #333;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
        }
        
        .friendsbutton {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin: 0 1rem 1rem 0;
            flex-shrink: 0;
            text-align: center;
            width: 150px;
        }

        .product button:hover {
            background-color: #555;
        }

        .suggested-friends {
            margin-top: 2rem;
        }

        .friends-list {
            list-style: none;
            padding: 0;
            display: flex;
            overflow-x: auto; /* Allow horizontal scrolling */
            flex-wrap: nowrap;
        }

        .friend {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin: 0 1rem 1rem 0;
            flex-shrink: 0;
            text-align: center;
            width: 150px;
        }

        .friend img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-bottom: 1rem;
        }

        .friend h4 {
            margin: 0.5rem 0;
        }

        .friend p {
            margin: 0.2rem 0;
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem;
        }

        .not-logged-in-content {
            background-color: #ffe5e5;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>

<body>
    <header>
        <h1>NOVA TAG</h1>
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Search...">
            <button onclick="search()">Search</button>
        </div>
        <nav>
            <ul class="tabs">
                <li>
                    <a href="#">Social</a>
                    <div class="dropdown">
                        <a href="/profile">Profile</a>
                        <a href="/friends">Friends</a>
                    </div>
                </li>
                <li>
                    <a href="#">Store</a>
                    <div class="dropdown">
                        <a href="/shop">Shop</a>
                    </div>
                </li>
                <li>
                    <a href="#">Rules</a>
                    <div class="dropdown">
                        <a href="/pp">Privacy Policy</a>
                        <a href="/tos">Terms Of Service</a>
                        <a href="/coc">Code Of Conduct</a>
                    </div>
                </li>
                <li><a href="/settings">Settings</a></li>
            </ul>
        </nav>
    </header>

    <main class="mainS" id="main-content" style="display: none;">
        <section id="home" class="content-section">
            <h2 style="text-align: center;">WELCOME TO NOVA TAG</h2>
            <p style="text-align: center;">Nova Tag is a VR game on Meta Quest.</p>
            <h2>Our Products</h2>
            <div id="product-list" class="friends-list">
                <template id="product-template">
                  <div class="friend">
                    <h3 class="product-name"></h3>
                    <img class="product-image" src="" alt="">
                    <p class="product-description"></p>
                    <p class="product-price"></p>
                    <input type="hidden" class="productID" value="">
                    <button class="view-item-btn">View item</button>
                  </div>
                </template>
            </div>

            <div class="suggested-friends">
                <h2>Whats New</h2>
                <ul class="friends-list">
                    <div class="friend">
                        <h3>Changelog for 10/10/24</h3>
                        <p>We have finished the friend adding api, and along with that we have added online status.</p>
                    </div>
                </ul>
            </div>

            <div class="suggested-friends">
                <h3>Suggested Friends</h3>
                <ul class="friends-list" id="friends-list">
                    <template id="user-template">
                        <img src=" " alt="LSG">
                        <h4 class="user-name"></h4>
                        <p>Tags: <span class="user-tags"></span></p>
                        <p>Tag Ratio: <span class="user-tagratio"></span></p>
                        <p>Playtime: <span class="user-playTime"></span></p>
                        <input type="hidden" class="friendID" value="">
                        <button class="friendsbutton">View user</button>
                    </template>
                    <div class="friend">
                        <h4>!</h4>
                        <p>!</p>
                        <p>!</p>
                        <p>!</p>
                    </div>
                </ul>
            </div>
        </section>
    </main>

            <div id="not-logged-in-content" class="not-logged-in-content" style="display: none;">
                <h2>You are not logged in</h2>
                <p>Please log in with Meta to access the main content of the page.</p>
                <button onclick="redirectloginPage()" class="login-button">Login with Meta</button>
            </div>

    <footer>
        <section id="about-contact" class="content-section">
            <h2>About Us & Contact Us</h2>
            <p>Phone: <a href="tel:5074074178">(507) 407-4178</a></p>
            <p>Email: <a href="mailto:support@novatag.lol">support@novatag.lol</a></p>
            <p>&copy; 2024 Nova Tag By LSG</p>
        </section>
    </footer>

    <script>
        function search() {
            const searchInput = document.getElementById('search-input').value;
            window.location.href = `/search?searchIM=${encodeURIComponent(searchInput)}`;
        }
     </script>

    <script>
        function redirectPage(button) {
            // Find the closest parent '.product' element
            const friendDiv = button.closest('.friend');
            
            // Retrieve the productID from the hidden input inside the parent div
            const friendID = friendDiv.querySelector('.friendID').value;
            
            // Redirect to the product page using the productID
            window.location.href = `/user?username=${friendID}`;
        }
        
        function redirectloginPage() {
            window.location.href = `https://auth.oculus.com/sso?client_id=7238920182799088&redirect_uri=https://novatag.lol/Login/?code=&response_type=code&scope=openid&org_id=828543425687060`;
        }
    </script>

    <script>
        function enableMainContent() {
            document.querySelector('.login-button').style.display = 'none';
            document.getElementById('not-logged-in-content').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            // Additional logic to load products and friends list
        }

        function showNotLoggedInMessage() {
            document.querySelector('.login-button').style.display = 'block';
            document.getElementById('not-logged-in-content').style.display = 'block';
        }

        function redirectToPage(productID) {
    // Redirect to the product page using the productID
            window.location.href = `/product?productID=${productID}`;
        }

    </script>

    <script>
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }
        
        document.addEventListener('DOMContentLoaded', () => {
            const isLoggedIn = getCookie('isLoggedIn');
    
            if (isLoggedIn === 'true') {
                enableMainContent();
            } else {
                showNotLoggedInMessage();
            }
        });
    </script>

<script>
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

        document.addEventListener('DOMContentLoaded', () => {
            const darkMode = getCookie('darkMode');

            if (darkMode === 'true') {
                    document.body.classList.remove('light-mode');
                    document.body.classList.add('dark-mode');
            } else {
                    document.body.classList.remove('dark-mode');
                    document.body.classList.add('light-mode');
            }
        });
</script>

        <script>
        async function loadProducts() {
            try {
                const response = await fetch('https://1d62c3c9-d69b-4407-9833-107c85ed3bd9-00-3pamqtk5wwj5h.kirk.replit.dev/products'); // Fetch from your API endpoint
                const products = await response.json();
                const container = document.getElementById('product-list');
                const template = document.getElementById('product-template').content;
                
                products.forEach(product => {
                    const productDiv = template.cloneNode(true);
                    productDiv.querySelector('.product-image').src = product.image; // Set the image URL
                    productDiv.querySelector('.product-image').alt = product.name; // Set alt text to the product name
                    productDiv.querySelector('.product-name').textContent = product.name;
                    productDiv.querySelector('.product-price').textContent = '$' + product.price + '.99';
                    productDiv.querySelector('.product-description').textContent = product.description;
                    productDiv.querySelector('.productID').value = product.productID;
                    
                    productDiv.querySelector('.view-item-btn').onclick = function() {
                        redirectToPage(productData.productID);
                    };
        
                    container.appendChild(productDiv);
                });
            } catch (err) {
                console.error('Failed to load products:', err);
            }
        }

        async function loadUsers() {
            try {
                const response = await fetch('https://1d62c3c9-d69b-4407-9833-107c85ed3bd9-00-3pamqtk5wwj5h.kirk.replit.dev/users'); // Fetch from your API endpoint
                const users = await response.json();
                const container = document.getElementById('user-list');
                const template = document.getElementById('user-template').content;
                
                users.forEach(user => {
                    const userDiv = template.cloneNode(true);
                    userDiv.querySelector('.user-image').src = user.image; // Set the image URL
                    userDiv.querySelector('.user-name').textContent = user.username; // Set the username
                    userDiv.querySelector('.user-playTime').textContent = user.playTime; // Set the playTime
                    userDiv.querySelector('.user-tags').textContent = user.tags; // Set the tags
                    userDiv.querySelector('.user-tagratio').textContent = user.tagratio; // Set the tag ratio
                    
                    userDiv.querySelector('.friendsbutton').onclick = function() {
                        redirectToPage(user.userID); // Redirect using the user's ID
                    };
        
                    container.appendChild(userDiv);
                });
            } catch (err) {
                alert('Failed to load users:', err);
            }
        }


    
        window.onload = loadProducts;
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4231550133692753"
     crossorigin="anonymous"></script>

</body>

</html>
